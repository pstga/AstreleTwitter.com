@using Microsoft.AspNetCore.Identity
@using AstreleTwitter.com.Models
@inject SignInManager<ApplicationUser> SignInManager
@inject UserManager<ApplicationUser> UserManager

@if (SignInManager.IsSignedIn(User))
{
    var currentUser = await UserManager.GetUserAsync(User);
    <div class="sidebar-user">
        @if (!string.IsNullOrEmpty(currentUser?.ProfilePicture))
        {
            <img src="@currentUser.ProfilePicture" class="sidebar-avatar" />
        }
        else
        {
            <div class="sidebar-avatar bg-secondary d-flex align-items-center justify-content-center">
                <i class="fa-solid fa-user text-white"></i>
            </div>
        }
        <div class="sidebar-user-info">
            <div class="sidebar-user-name">@currentUser?.FirstName @currentUser?.LastName</div>
            <div class="sidebar-user-username">@@@currentUser?.UserName</div>
        </div>
    </div>
    <a class="sidebar-item" asp-controller="Profiles" asp-action="Edit">
        <i class="fa-solid fa-pen-to-square"></i>
        <span>Editează Profil</span>
    </a>
    <form asp-area="Identity" asp-page="/Account/Logout" asp-route-returnUrl="@Url.Action("Index", "Home", new { area = "" })" class="w-100">
        <button type="submit" class="sidebar-item w-100" style="border: none; background: none; text-align: left;">
            <i class="fa-solid fa-right-from-bracket"></i>
            <span>Deconectare</span>
        </button>
    </form>
}
else
{
    <a class="sidebar-item" asp-area="Identity" asp-page="/Account/Login">
        <i class="fa-solid fa-right-to-bracket"></i>
        <span>Conectare</span>
    </a>
    <a class="sidebar-item" asp-area="Identity" asp-page="/Account/Register">
        <i class="fa-solid fa-user-plus"></i>
        <span>Înregistrare</span>
    </a>
}